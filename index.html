<html lang="en"><head>
<meta name=”viewport” content=”width=device-width, initial-scale=1.0″
<meta charset="UTF-8">
<link rel="apple-touch-icon" type="image/png" href="https://static.codepen.io/assets/favicon/apple-touch-icon-5ae1a0698dcc2402e9712f7d01ed509a57814f994c660df9f7a952f3060705ee.png">
<meta name="apple-mobile-web-app-title" content="LAI-SHI-HAN">
<link rel="shortcut icon" type="image/x-icon" href="https://static.codepen.io/assets/favicon/favicon-aec34940fbc1a6e787974dcd360f2c6b63348d4b1f4e06c77743096d55480f33.ico">
<link rel="mask-icon" type="" href="https://static.codepen.io/assets/favicon/logo-pin-8f3771b1072e3c38bd662872f6b673a722f4b3ca2421637d5596661b4e2132cc.svg" color="#111">
<title>i-bar</title>
<style>
html,body{
  width: 100%;
  height: 100%;
}
@media (min-width: 600px) {
  p {
    font-size: 30px;
  }
}
map {
    width: 100%;
    height: 100%;
}


.marker-cluster-small {
		background-color: rgba(181, 226, 140, 0.6);
		}
	.marker-cluster-small div {
		background-color: rgba(110, 204, 57, 0.6);
		}

	.marker-cluster-medium {
		background-color: rgba(241, 211, 87, 0.6);
		}
	.marker-cluster-medium div {
		background-color: rgba(240, 194, 12, 0.6);
		}

	.marker-cluster-large {
		background-color: rgba(253, 156, 115, 0.6);
		}
	.marker-cluster-large div {
		background-color: rgba(241, 128, 23, 0.6);
		}

	.marker-cluster {
		background-clip: padding-box;
		border-radius: 20px;
		}
	.marker-cluster div {
		width: 30px;
		height: 30px;
		margin-left: 15px;
		margin-top: 5px;

		text-align: center;
		border-radius: 15px;
		font: 30px, "Helvetica Neue", Arial, Source Sans Pro, sans-serif;
		}
	.marker-cluster span {
		line-height: 30px;
		}

@import url(https://fonts.googleapis.com/earlyaccess/cwtexyen.css);
.popup-name {
    padding-left: 10px;
    border-left: 5px solid rgb(16, 120, 121);
    color: #000000;
    font-family: 'cwTeXYen', sans-serif;
    line-height:2;
    font-size: 25px;
    font-weight: bold;
}

.popup-star {
  padding-left: 10px;
    border-left: 5px solid rgb(	255,215,0);
    color: #000000;
    font-family: 'cwTeXYen', sans-serif;
    line-height:2;
    font-size:20px;
    font-weight: bold;
}

.popup-address {
    padding-left: 10px;
    border-left: 5px solid rgb(220,20,60);
    color: #000000;
    font-family: 'cwTeXYen', sans-serif;
    line-height:2;
    font-size: larger;
    font-weight: bold;
}
</style>
</head>
<body translate="no">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.4.1/MarkerCluster.css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.4.1/MarkerCluster.Default.css">
<div id="map" class="leaflet-container leaflet-fade-anim leaflet-grab leaflet-touch-drag" tabindex="0" style="position: relative;"><div class="leaflet-pane leaflet-map-pane" style="transform: translate3d(-198px, -376px, 0px);"><div class="leaflet-pane leaflet-tile-pane"><div class="leaflet-layer " style="z-index: 1; opacity: 1;"><div class="leaflet-tile-container leaflet-zoom-animated" style="z-index: 18; transform: translate3d(-1230px, -3084px, 0px) scale(2);"></div><div class="leaflet-tile-container leaflet-zoom-animated" style="z-index: 19; transform: translate3d(-410px, -1028px, 0px) scale(1);"><img alt="" role="presentation" src="https://c.tile.openstreetmap.org/19/439165/224455.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(408px, 1776px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://a.tile.openstreetmap.org/19/439166/224455.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(664px, 1776px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://b.tile.openstreetmap.org/19/439165/224454.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(408px, 1520px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://c.tile.openstreetmap.org/19/439166/224454.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(664px, 1520px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://a.tile.openstreetmap.org/19/439165/224456.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(408px, 2032px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://b.tile.openstreetmap.org/19/439166/224456.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(664px, 2032px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://b.tile.openstreetmap.org/19/439164/224455.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(152px, 1776px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://b.tile.openstreetmap.org/19/439167/224455.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(920px, 1776px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://a.tile.openstreetmap.org/19/439164/224454.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(152px, 1520px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://a.tile.openstreetmap.org/19/439167/224454.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(920px, 1520px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://c.tile.openstreetmap.org/19/439164/224456.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(152px, 2032px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://c.tile.openstreetmap.org/19/439167/224456.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(920px, 2032px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://a.tile.openstreetmap.org/19/439165/224453.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(408px, 1264px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://b.tile.openstreetmap.org/19/439166/224453.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(664px, 1264px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://b.tile.openstreetmap.org/19/439165/224457.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(408px, 2288px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://c.tile.openstreetmap.org/19/439166/224457.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(664px, 2288px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://c.tile.openstreetmap.org/19/439164/224453.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(152px, 1264px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://c.tile.openstreetmap.org/19/439167/224453.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(920px, 1264px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://a.tile.openstreetmap.org/19/439164/224457.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(152px, 2288px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://a.tile.openstreetmap.org/19/439167/224457.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(920px, 2288px, 0px); opacity: 1;"></div></div></div><div class="leaflet-pane leaflet-shadow-pane"><img src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png" class="leaflet-marker-shadow leaflet-zoom-animated" alt="" style="margin-left: -43px; margin-top: -86px; width: 10px; height: 10px; transform: translate3d(264px, 1797px, 0px); opacity: 1;"><img src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png" class="leaflet-marker-shadow leaflet-zoom-animated" alt="" style="margin-left: -43px; margin-top: -86px; width: 10px; height: 10px; transform: translate3d(114px, 805px, 0px); opacity: 1;"><img src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png" class="leaflet-marker-shadow leaflet-zoom-animated" alt="" style="margin-left: -43px; margin-top: -86px; width: 10px; height: 10px; transform: translate3d(364px, 650px, 0px); opacity: 1;"></div><div class="leaflet-pane leaflet-overlay-pane"><svg pointer-events="none" class="leaflet-zoom-animated" width="160" height="1130" viewBox="185 282 160 1130" style="transform: translate3d(185px, 282px, 0px);"><g><path class="leaflet-interactive" stroke="skyblue" stroke-opacity="1" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="#00298a" fill-opacity="0.1" fill-rule="evenodd" d="M-2715.1718670278788,944.812749452889a3701,3701 0 1,0 7402,0 a3701,3701 0 1,0 -7402,0 "></path></g></svg></div><div class="leaflet-pane leaflet-marker-pane"><img src="https://github.com/Han-lai/i-bar_map/blob/master/icons8-cocktail2.png?raw=true" class="leaflet-marker-icon leaflet-zoom-animated leaflet-interactive" alt="" tabindex="0" style="margin-left: -43px; margin-top: -86px; width: 200px; height: 200px; transform: translate3d(264px, 1797px, 0px); z-index: 1797; opacity: 1;"><img src="https://github.com/Han-lai/i-bar_map/blob/master/icons8-cocktail3.png?raw=true" class="leaflet-marker-icon leaflet-zoom-animated leaflet-interactive" alt="" tabindex="0" style="margin-left: -43px; margin-top: -86px; width: 200px; height: 200px; transform: translate3d(114px, 805px, 0px); z-index: 805; opacity: 1; outline: none;"><img src="https://github.com/Han-lai/i-bar_map/blob/master/icons8-cocktail2.png?raw=true" class="leaflet-marker-icon leaflet-zoom-animated leaflet-interactive" alt="" tabindex="0" style="margin-left: -43px; margin-top: -86px; width: 200px; height: 200px; transform: translate3d(364px, 650px, 0px); z-index: 650; opacity: 1;"></div><div class="leaflet-pane leaflet-tooltip-pane"></div><div class="leaflet-pane leaflet-popup-pane"><div class="leaflet-popup  leaflet-zoom-animated" style="opacity: 1; transform: translate3d(115px, 719px, 0px); bottom: -7px; left: -271px;"><div class="leaflet-popup-content-wrapper"><div class="leaflet-popup-content" style="width: 501px;"><h1 class="popup-name"> 蘇洛酒吧</h1><h1></h1><h1 class="popup-star">  [ 星級 ] 3.9</h1><h1></h1><h1 class="popup-address">[ 地址 ] 大安區忠孝東路四段172號神旺飯店1樓</h1><h1></h1></div></div><div class="leaflet-popup-tip-container"><div class="leaflet-popup-tip"></div></div><a class="leaflet-popup-close-button" href="#close">×</a></div></div><div class="leaflet-proxy leaflet-zoom-animated" style="transform: translate3d(1.12427e+08px, 5.74606e+07px, 0px) scale(262144);"></div></div><div class="leaflet-control-container"><div class="leaflet-top leaflet-left"><div class="leaflet-control-zoom leaflet-bar leaflet-control"><a class="leaflet-control-zoom-in leaflet-disabled" href="#" title="Zoom in" role="button" aria-label="Zoom in">+</a><a class="leaflet-control-zoom-out" href="#" title="Zoom out" role="button" aria-label="Zoom out">−</a></div></div><div class="leaflet-top leaflet-right"></div><div class="leaflet-bottom leaflet-left"></div><div class="leaflet-bottom leaflet-right"><div class="leaflet-control-attribution leaflet-control"><a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> | © <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors</div></div></div></div>
<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.4.1/leaflet.markercluster.js"></script>
<script id="rendered-js">
var map = L.map("map", {
  center: [25.040959, 121.553324],
  zoom: 16
});



var OpenStreetMap_Mapnik = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
	//maxZoom: 19,
	attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);


var circle = L.circle([25.040959, 121.553324],   // 圓心座標
1000,                // 半徑（公尺）
{
  color: 'skyblue',      // 線條顏色
  fillColor: '#00298a', // 填充顏色
  fillOpacity: 0.1   // 透明度
}).addTo(map);


var Icon1 = new L.Icon({
  iconUrl:'https://raw.githubusercontent.com/Han-lai/i-bar_map/master/icons8-cocktail1.png',
  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
  iconSize: [86, 86],
  iconAnchor: [43, 86],
  popupAnchor: [1, -86],
  shadowSize: [10, 10]
});

var Icon2 = new L.Icon({
  iconUrl: 'https://raw.githubusercontent.com/Han-lai/i-bar_map/master/icons8-cocktai2.png',
  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
  iconSize: [86, 86],
  iconAnchor: [43, 86],
  popupAnchor: [1, -86],
  shadowSize: [10, 10]
});

var Icon3 = new L.Icon({
    iconUrl: 'https://raw.githubusercontent.com/Han-lai/i-bar_map/master/icons8-cocktail3.png',
    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
  iconSize: [86, 86],
  iconAnchor: [43, 86],
  popupAnchor: [1, -86],
  shadowSize: [10, 10]
});

var blackIcon = new L.Icon({
    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-black.png',
    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
  iconSize: [86, 86],
  iconAnchor: [43, 86],
  popupAnchor: [1, -86],
  shadowSize: [10, 10]
});

var markers = new L.MarkerClusterGroup().addTo(map);;
//在中心座標，放上黑色定位圖標
//L.marker([25.037801, 121.548855], { icon: blackIcon }).addTo(map);


var xhr = new XMLHttpRequest();
xhr.open('get', 'https://raw.githubusercontent.com/Han-lai/i-bar_map/master/taipei_bar.json');
xhr.send();
xhr.onload = function () {
    var data = JSON.parse(xhr.responseText).results;
    for (var i = 0; i < data.length; i++) {

        //將酒吧星級標記不同顏色的圖標
        var imageIcon = blackIcon;
        if (data[i].rating >= 4.5)
            imageIcon = Icon1;
        else if (data[i].rating > 4.0)
            imageIcon = Icon2;
        else if (data[i].rating > 3.0)
            imageIcon = Icon3;
        
        //設定酒吧經緯度和 Popup 內容
         var mark = L.marker([
            data[i].geometry.location.lat,
            data[i].geometry.location.lng
        ], { icon: imageIcon }
        ).bindPopup(
            '<p class="popup-name"> ' + 
                data[i].name + '<p/>' +
            '<p class="popup-star">   評分數 : ' + 
                data[i].rating + '<p/>' +
            '<p class="popup-address">地址 : ' + 
                data[i].vicinity + '<p/>', { minWidth:600 ,maxHeight: 500});
        //將圖標加入圖層
        markers.addLayer(mark);
    }
    map.addLayer(markers);
};
    </script>


</body></html>
